<!DOCTYPE html><html lang=""><head><title>找回密码</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=no"><style type="text/css">*{margin:0;padding:0}body,html{width:100%;height:100%;overflow:hidden;font-family:"黑体",tahoma,arial,simsun,"宋体";-webkit-text-size-adjust:none;-webkit-tap-highlight-color:transparent;-webkit-user-select:none;-webkit-touch-callout:none}.container-fluid{position:relative;width:100%;margin-left:auto;margin-right:auto;overflow:hidden}.row-fluid{position:relative;line-height:auto;padding:6px 16px 6px 16px;overflow:hidden}.row-fluid.validate{padding-top:15px;padding-bottom:15px}.rim-bottom{border-bottom:1px solid #DADEDD}.rim-top{border-top:1px solid #DADEDD}.btn{display:inline-block;font-size:14px}.btn-send{float:right;width:115px;height:34px;background-color:#B5B9B8;border:1px solid #A6A9A8;border-radius:3px;-webkit-border-radius:3px;-moz-border-radius:3px;color:#fff;line-height:34px;outline:0}.btn-send.able{background-color:#63AC5B;color:#fff}.label-phone{float:left;line-height:39px;text-align:center;font-size:14px}.input-rimless{display:inline-block;float:left;border:none;outline:0;line-height:14px;margin-left:16px;padding-top:11px;padding-bottom:11px;text-align:left;font-size:14px}.input-validate{display:inline-block;width:100%;padding-top:8px;padding-bottom:8px;border:1px solid #91A8B0;border-radius:3px;-webkit-border-radius:3px;-moz-border-radius:3px;outline:0;line-height:14px;font-size:14px;text-align:center}.input-validate::-webkit-input-placeholder{text-align:center;font-size:14px}.input-validate:-moz-placeholder{text-align:center;font-size:14px}.input-validate::-moz-placeholder{text-align:center;font-size:12px}.input-validate:-ms-input-placeholder{text-align:center;font-size:14px}.send-wrap{float:right}.valid-wrap{margin-right:150px}.btn-down,.gluebottom{position:fixed;width:100%;box-sizing:border-box;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;text-align:center}.btn-down button,.gluebottom button{height:39px;width:100%;color:#fff;border-radius:3px;font-size:14px;outline:0}.gluebottom button{background-color:#3A87A0;border:1px solid #629FB4}.btn-down button{background-color:#225C6E;border:1px solid #629FB4}.loading{display:block;margin:0 auto;margin-top:50%;display:none}</style><body draggable="false"><div draggable="false" class="container-fluid"><div class="row-fluid rim-bottom"><label class="label-phone">手机号</label><input class="input-rimless" type="tel" pattern="[0-9]" maxlength="11" placeholder="请输入手机号"></div><div class="container-fluid"><div class="row-fluid validate"><div class="send-wrap"><button class="btn btn-send">发送验证码</button></div><div class="valid-wrap"><input class="input-validate" placeholder="请输入验证码"></div></div></div><div class="row-fluid gluebottom"><button class="commitBtn">确认</button></div></div><script type="text/javascript">var iphoneUrl="https://itunes.apple.com/us/app/xiao-mei-sheng-huo/id894465362?l=zh&ls=1&mt=8";
var androidUrl="http://cdn.xiaomei.com/app/xmlife/xmlife_2.5.169.apk";
var httpUrl="service.xiaomei.com";
var imageRes="http://res.xiaomei.com/";
var instRes="http://instimage.xiaomei.com/";
var shopperAndroidUrl="http://cdn.xiaomei.com/app/xmlife/supershoper_2.4.55.apk";
var wxConfig = {
    appId: 'wxdcbe0affffba53e0'
};
</script><script type="text/javascript">function hasClass(e,t){return e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function addClass(e,t){this.hasClass(e,t)||(e.className+=" "+t)}function removeClass(e,t){if(hasClass(e,t)){var a=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(a," ")}}function toggleClass(e,t){hasClass(e,t)?removeClass(e,t):addClass(e,t)}function RegExString(e){for(var t="",a=e.length,n=0;a>n;n++){var s=e.charAt(n);s>="0"&&"9">=s&&(t+=s)}return t}function addEvent(e,t,a,n){if(e.addEventListener)return e.addEventListener(t,a,n),!0;if(e.attachEvent){var s=e.attachEvent("on"+t,a);return s}e["on"+t]=a}function getCoords(e){var t=e.getBoundingClientRect(),a=e.ownerDocument,n=a.body,s=a.documentElement,o=s.clientTop||n.clientTop||0,l=s.clientLeft||n.clientLeft||0,r=t.top+(self.pageYOffset||s.scrollTop||n.scrollTop)-o,c=t.left+(self.pageXOffset||s.scrollLeft||n.scrollLeft)-l;return{top:r,left:c}}!function(){var e=document.getElementsByClassName("input-rimless")[0],t=document.getElementsByClassName("btn btn-send")[0],a=document.getElementsByClassName("gluebottom")[0],n=document.getElementsByClassName("commitBtn")[0],s=document.getElementsByClassName("input-validate")[0],o={INVALID_PHONE:"-28",INVALID_AUTH_TYPE:"-27",AUTHCODE_EXPIRE:"-25",ACTION_FAILED:"-18",PHONE_NOTEXIST:"-22"},l={INVALID_PHONE:"无效手机号",INVALID_AUTH_TYPE:"",AUTHCODE_EXPIRE:"验证码过期",ACTION_FAILED:"验证失败",PHONE_NOTEXIST:"手机号未注册"},r=function(){var t=(s.value,e.value),a=new XMLHttpRequest,n=window.localStorage?window.localStorage.getItem("deviceId"):null;n||(n="xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,a="x"==e?t:3&t|8;return a.toString(16)}),window.localStorage&&window.localStorage.setItem("deviceId",n));var r=window.location.host;r.match("localhost")?r="dev.xiaomei.com":r.match("www")&&(r=httpUrl);var c=new Date,i="http://"+r+"/biz/rest/auth/getCode?phone="+t+"&verifyType=4&deviceId="+n+"&t="+c.getTime();a.onreadystatechange=function(){if(4==a.readyState)if(a.status>=200&&a.status<300||304==a.status){if("0"!=a.responseText)switch(a.responseText){case o.INVALID_PHONE:alert(l.INVALID_PHONE);break;case o.INVALID_AUTH_TYPE:alert(l.INVALID_AUTH_TYPE);break;case o.AUTHCODE_EXPIRE:alert(l.AUTHCODE_EXPIRE);break;case o.ACTION_FAILED:alert(l.ACTION_FAILED);break;case o.PHONE_NOTEXIST:alert(l.PHONE_NOTEXIST)}console.log("valid code is"+a.responseText)}else alert("获取验证码失败:"+a.status)},a.open("get",i,!0),a.send()};11==e.value.length&&(t.className="btn btn-send able"),s.value="",addEvent(e,"keyup",function(t){var a=e.value;return e.value=RegExString(a),!1},!1),addEvent(e,"input",function(a){var a=a||event,n=(a.keyCode||a.which||a.charCode,e.value.length);return 11!=n||document.getElementById("minit")?t.className="btn btn-send ":t.className="btn btn-send able",!1},!1),addEvent(t,"click",function(e){if(document.getElementById("minit")||"btn btn-send able"!==t.className)return!1;t.className="btn btn-send",t.innerHTML="";var a=document.createElement("span"),n=document.createElement("span");a.id="minit",a.innerHTML="60",n.innerHTML="秒再次发送",t.appendChild(a),t.appendChild(n);for(var s=0;61>s;s++)!function(e){setTimeout(function(){return 0>60-e-1?(t.innerHTML="发送验证码",void(t.className="btn btn-send able")):void(a.innerHTML=60-e-1)},1e3*(e+1))}(s);r()},!1),addEvent(a,"click",function(t){var a=s.value,n=e.value,r=new XMLHttpRequest,c=window.localStorage?window.localStorage.getItem("deviceId"):null;if(n){c||(c="xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,a="x"==e?t:3&t|8;return a.toString(16)}),window.localStorage&&window.localStorage.setItem("deviceId",c));var i=window.location.host;i.match("localhost")?i="dev.xiaomei.com":i.match("www")&&(i=httpUrl);var d=new Date,u="http://"+i+"/biz/rest/auth/authCode?phone="+n+"&verifyType=4&authcode="+a+"&deviceId="+c+"&t="+d.getTime();r.onreadystatechange=function(){if(4==r.readyState)if(r.status>=200&&r.status<300||304==r.status)if(r.responseText)window.location.href="passwordreset2.html?authcode="+r.responseText+"&phone="+n+"&t="+d.getTime();else switch(r.responseText){case o.INVALID_PHONE:alert(l.INVALID_PHONE);break;case o.INVALID_AUTH_TYPE:alert(l.INVALID_AUTH_TYPE);break;case o.AUTHCODE_EXPIRE:alert(l.AUTHCODE_EXPIRE);break;case o.ACTION_FAILED:alert(l.ACTION_FAILED);break;case o.PHONE_NOTEXIST:alert(l.PHONE_NOTEXIST)}else alert("请求失败:"+r.status)},r.open("get",u,!0),r.send()}}),addEvent(a,"touchstart",function(e){hasClass(a,"btn-down")?null:addClass(a,"btn-down")},!1),addEvent(a,"touchend",function(e){hasClass(a,"btn-down")?removeClass(a,"btn-down"):null},!1);var c=getCoords(n),i=n.offsetWidth,d=n.offsetHeight,u=c.left,x=c.left+i,E=c.top,m=c.top+d;addEvent(a,"touchmove",function(e){e.preventDefault();var t,n;t=e.targetTouches[0].pageX,n=e.targetTouches[0].pageY,(u>t||t>x||E>n||n>m)&&(hasClass(a,"btn-down")?removeClass(a,"btn-down"):null)},!1)}();</script>
